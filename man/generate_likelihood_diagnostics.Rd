% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mcmc_convergence_report.R
\name{generate_likelihood_diagnostics}
\alias{generate_likelihood_diagnostics}
\title{Generate and Plot MCMC Convergence Diagnostics}
\usage{
generate_likelihood_diagnostics(
  all_chains_loglikelihood,
  site_name,
  save_plot = FALSE,
  output_folder = NULL,
  verbose = TRUE
)
}
\arguments{
\item{all_chains_loglikelihood}{A list where each element is a numeric vector
representing the log-likelihood history of one MCMC chain.}

\item{site_name}{A character string for labeling plots and creating the output
subdirectory when saving.}

\item{save_plot}{A logical. If \code{TRUE}, plots are saved as PNG files. If \code{FALSE}
(the default), plots are displayed in the active R graphics device.}

\item{output_folder}{A character string specifying the path to a directory where
plots should be saved. Only used if \code{save_plot = TRUE}.}

\item{verbose}{A logical. If \code{TRUE} (the default), prints the Gelman-Rubin
and ESS summaries to the console.}
}
\value{
An invisible list containing the calculated diagnostic results:
\itemize{
\item \code{gelman}: The Gelman-Rubin diagnostic result.
\item \code{ess}: The Effective Sample Size result.
\item \code{n_valid}: The number of valid (finite) samples per chain.
}
}
\description{
Calculates standard MCMC convergence diagnostics (Gelman-Rubin R-hat,
Effective Sample Size) and generates diagnostic plots (traceplot, Gelman plot,
histogram, ACF) for the log-likelihood.
}
\details{
This function takes the log-likelihood history from multiple MCMC chains,
cleans the data, and uses the \code{coda} package to compute diagnostics.
It can either display plots in the active R graphics device or save them as
PNG files to a specified directory.
}
\examples{
# --- Example 1: Interactive Plotting ---
# To view plots in the RStudio Plots pane (will ask before showing each plot)
\dontrun{
  generate_likelihood_diagnostics(all_chains, site_name = "Test Site")
}

# --- Example 2: Saving Plots to a File ---
# Create a temporary directory for the output
temp_dir <- tempdir()
# Simulate some dummy MCMC chains for demonstration
all_chains <- list(
  chain1 = rnorm(1000, mean = -150, sd = 5),
  chain2 = rnorm(1000, mean = -150, sd = 5)
)
# Run the function to save plots
generate_likelihood_diagnostics(all_chains,
                                site_name = "Test Site",
                                save_plot = TRUE,
                                output_folder = temp_dir)

# Check that the files were created
list.files(file.path(temp_dir, "convergence_diagnosis", "Test Site"))

}
